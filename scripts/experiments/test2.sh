#!/bin/zsh
mlx_submit_v2() {
  if [[ -e scripts/mlx_submit/run_v2.py ]]; then
    python3 scripts/mlx_submit/run_v2.py "$@"
  else
    echo "错误：scripts/mlx_submit/run_v2.py 不存在，请确认路径是否正确。"
  fi
}
scenes=(
    "09c1414f1b"
    "c545851c4f"
    "079a326597"
    "acd95847c5"
    "320c3af000"
    "25f3b7a318"
    "4422722c49"
    "893fb90e89"
    "98b4ec142f"
    "cf1ffd871d"
    "fe1733741f"
    "5942004064"
    "4318f8bb3c"
    "54b6127146"
    "c5f701a8c7"
    "e7af285f7d"
    "f3d64c30f8"
    "a1d9da703c"
    "08bbbdcc3d"
    "1b75758486"
    "a08d9a2476"
    "f8f12e4e6b"
    "c5439f4607"
    "50809ea0d8"
    "d415cc449b"
    "0a76e06478"
    "251443268c"
    "a08dda47a8"
    "f6659a3107"
    "39f36da05b"
    "210f741378"
    "c50d2d1d42"
    "56a0ec536c"
    "13c3e046d7"
    "dc263dfbf0"
    "484ad681df"
    "8890d0a267"
    "e050c15a8d"
    "d6cbe4b28b"
    "8a35ef3cfe"
    "d6d9ddb03f"
    "5654092cc2"
    "d755b3d9d8"
    "21d970d8de"
    "c24f94007b"
    "e3ecd49e2b"
    "b08a908f0f"
    "f8062cb7ce"
    "f25f5e6f63"
    "ab6983ae6c"
    "07f5b601ee"
    "0a7cc12c0e"
    "55b2bf8036"
    "b0a08200c9"
    "9460c8889d"
    "cc5237fd77"
    "faec2f0468"
    "daffc70503"
    "fb5a96b1a2"
    "4ba22fa7e4"
    "52599ae063"
    "6115eddb86"
    "c173f62b15"
    "419cbe7c11"
    "712dc47104"
    "b5918e4637"
    "7831862f02"
    "bc2fce1d81"
    "2e74812d00"
    "bf6e439e38"
    "e8e81396b6"
    "036bce3393"
    "5eb31827b7"
    "7079b59642"
    "3f1e1610de"
    "6464461276"
    "8b5caf3398"
    "c413b34238"
    "98fe276aa8"
    "c47168fab2"
    "ef69d58016"
    "16c9bd2e1e"
    "bc03d88fc3"
    "5ee7c22ba0"
    "fb05e13ad1"
    "7e09430da7"
    "f248c2bcdc"
    "8f82c394d6"
    "b97261909e"
    "be0ed6b33c"
    "75d29d69b8"
    "99fa5c25e1"
    "d7abfc4b17"
    "f9f95681fd"
    "eb4bc76767"
    "1c4b893630"
    "80ffca8a48"
    "824d9cfa6e"
    "302a7f6b67"
    "b1d75ecd55"
    "c9abde4c4b"
    "41b00feddb"
    "e0abd740ba"
    "acd69a1746"
    "5fb5d2dbf2"
    "f34d532901"
    "ef25276c25"
    "87f6d7d564"
    "bfd3fd54d2"
    "ccfd3ed9c7"
    "28a9ee4557"
    "7b6477cb95"
    "281bc17764"
    "260fa55d50"
    "9b74afd2d2"
    "fd361ab85f"
    "260db9cf5a"
    "3e8bba0176"
    "59e3f1ea37"
    "3928249b53"
    "8b2c0938d6"
    "d2f44bf242"
    "1366d5ae89"
    "e8ea9b4da8"
    "45b0dac5e3"
    "9071e139d9"
    "40aec5fffa"
    "c0c863b72d"
    "e1b1d9de55"
    "b20a261fdf"
    "8d563fc2cc"
    "2a496183e1"
    "3e928dc2f6"
    "480ddaadc0"
    "25927bb04c"
    "5748ce6f01"
    "303745abc7"
    "6d89a7320d"
    "2b1dc6d6a5"
    "88cf747085"
    "f5401524e5"
    "30966f4c6e"
    "a4e227f506"
    "c0f5742640"
    "c06a983e63"
    "a5114ca13d"
    "f07340dfea"
    "a980334473"
    "94ee15e8ba"
    "aaa11940d3"
    "f2dc06b1d2"
    "3864514494"
    "5a269ba6fe"
    "4ea827f5a1"
    "9f21bdec45"
    "9859de300f"
    "961911d451"
    "8e00ac7f59"
    "bcd2436daf"
    "689fec23d7"
    "e398684d27"
    "30f4a2b44d"
    "5656608266"
    "6b40d1a939"
    "c49a8c6cff"
    "7cd2ac43b4"
    "d6702c681d"
    "825d228aec"
    "40b56bf310"
    "1ada7a0617"
    "b09431c547"
    "286b55a2bf"
    "b26e64c4b0"
    "ad2d07fd11"
    "ebc200e928"
    "45d2e33be1"
    "ada5304e41"
    "7977624358"
    "7bc286c1b6"
    "c856c41c99"
    "c8f2218ee2"
    "5d152fab1b"
    "ab046f8faf"
    "709ab5bffe"
    "e01b287af5"
    "ed2216380b"
    "8a20d62ac0"
    "b73f5cdc41"
    "e0de253456"
    "1b9692f0c7"
    "a24f64f7fb"
    "bd9305480d"
    "1ae9e5d2a6"
    "3f15a9266d"
    "85251de7d1"
    "e9e16b6043"
    "1d003b07bd"
)
# 数组长度
len=${#scenes[@]}
submit_job() {
    local scenes=("$@")
    local job_name="zipnerf"
    for scene in "${scenes[@]}"; do
        job_name+="_${scene:0:5}"
    done
    local command="mlx_submit_v2 --job_name $job_name --num_mem 40 bash scripts/experiments/scannetpp_zipnerf_batch.sh ${scenes[*]}"
    echo "Executing: $command"
    $command
}
for ((i = 0; i < len; i += 8)); do
    batch=("${scenes[@]:i:8}")
    submit_job "${batch[@]}"
done