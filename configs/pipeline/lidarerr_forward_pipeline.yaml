defaults:
  - _self_

_target_: lib.model.lidarerr.diffusion.forward_pipeline.DiffusionPipeline

args:
  scheduler_opt_train: # Always DDPM
    _class_name: "DDPMScheduler"
    _diffusers_version: "0.8.0"
    beta_end: 0.012
    beta_schedule: "scaled_linear"
    beta_start: 0.00085
    clip_sample: False
    num_train_timesteps: 1000
    prediction_type: "v_prediction"
    # set_alpha_to_one: False
    # skip_prk_steps: True
    steps_offset: 1
    trained_betas: null
  scheduler_opt_test:
    _class_name: "DDIMScheduler"
    _diffusers_version: "0.8.0"
    beta_end: 0.012
    beta_schedule: "scaled_linear"
    beta_start: 0.00085
    clip_sample: False
    num_train_timesteps: 1000
    prediction_type: "v_prediction"
    set_alpha_to_one: False
    # skip_prk_steps: True
    steps_offset: 1
    trained_betas: null
  unet_opt:
    _class_name: "UNet"
    _diffusers_version: "0.20.1"
    act_fn: "silu"
    attention_head_dim: [5, 10, 20, 20]
    block_out_channels: [64, 128, 256, 256]
    center_input_sample: false
    cross_attention_dim: 1024
    # down_block_types: ["CrossAttnDownBlock2D", "CrossAttnDownBlock2D", "CrossAttnDownBlock2D", "DownBlock2D"]
    down_block_types: ["DownBlock2D", "DownBlock2D", "DownBlock2D", "DownBlock2D"]
    downsample_padding: 1
    dual_cross_attention: false
    flip_sin_to_cos: true
    freq_shift: 0
    in_channels: 4
    layers_per_block: 2
    mid_block_scale_factor: 1
    norm_eps: 1e-05
    norm_num_groups: 32
    out_channels: 1
    sample_size: 96
    # up_block_types: ["UpBlock2D", "CrossAttnUpBlock2D", "CrossAttnUpBlock2D", "CrossAttnUpBlock2D"]
    up_block_types: ["UpBlock2D", "UpBlock2D", "UpBlock2D", "UpBlock2D"] 
    use_linear_projection: true
  tokenizer_opt:
    config_dir: ${oc.env:workspace}/Marigold/checkpoint/Marigold_v1_merged_2/tokenizer
  textencoder_opt:
    config_dir: ${oc.env:workspace}/Marigold/checkpoint/Marigold_v1_merged_2/text_encoder


# # {
#   "_class_name": "UNet2DConditionModel",
#   "_diffusers_version": "0.20.1",
#   "_name_or_path": "Bingxin/Marigold/unet",
#   "act_fn": "silu",
#   "attention_head_dim": [
#     5,
#     10,
#     20,
#     20
#   ],
#   "block_out_channels": [
#     320,
#     640,
#     1280,
#     1280
#   ],
#   "center_input_sample": false,
#   "cross_attention_dim": 1024,
#   "down_block_types": [
#     "CrossAttnDownBlock2D",
#     "CrossAttnDownBlock2D",
#     "CrossAttnDownBlock2D",
#     "DownBlock2D"
#   ],
#   "downsample_padding": 1,
#   "dual_cross_attention": false,
#   "flip_sin_to_cos": true,
#   "freq_shift": 0,
#   "in_channels": 8,
#   "layers_per_block": 2,
#   "mid_block_scale_factor": 1,
#   "norm_eps": 1e-05,
#   "norm_num_groups": 32,
#   "out_channels": 4,
#   "sample_size": 96,
#   "up_block_types": [
#     "UpBlock2D",
#     "CrossAttnUpBlock2D",
#     "CrossAttnUpBlock2D",
#     "CrossAttnUpBlock2D"
#   ],
#   "use_linear_projection": true
# }