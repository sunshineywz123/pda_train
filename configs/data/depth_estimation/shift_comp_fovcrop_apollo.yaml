_target_: lib.datamodule.general_datamodule_v3.GeneralDataModule
train_dataset:
  dataset_opts: 
    - _target_: lib.dataset.depth_estimation.shift.Dataset
      data_root: /iag_ad_01/ad/yuanweizhong/datasets/shift/0a03-8855
      split_path: ${oc.env:workspace}/processed_datasets/shift/train_split.json
      split: 'train'
      frames: [0, -1, 1]
      transforms:
        - _target_: lib.dataset.depth_estimation.transform.PrepareForNet
        - _target_: lib.dataset.depth_estimation.transform.Crop
          size: [190, 325, 610, 955]
          down_scale: 1
        - _target_: lib.dataset.depth_estimation.transform.SimuCarLidar
          tar_lines: 64
          reserve_ratio: 0.5
          min_pitch: -0.07
        - _target_: lib.dataset.depth_estimation.transform.CompLowRes
    # - _target_: lib.dataset.depth_estimation.apollo.Dataset
    #   data_root: /iag_ad_01/ad/yuanweizhong/datasets/shift/0a03-8855
    #   split_path: ${oc.env:workspace}/processed_datasets/apollo/train_split.json
    #   split: 'train'
    #   frames: [0, -1, 1]
    #   transforms:
    #     - _target_: lib.dataset.depth_estimation.transform.PrepareForNet
    #     - _target_: lib.dataset.depth_estimation.transform.Crop
    #       size: [0, 150, 1080, 1770] # 1080x1620
    #       down_scale: 1
    #     - _target_: lib.dataset.depth_estimation.transform.UnPrepareForNet
    #     - _target_: lib.dataset.depth_estimation.transform.Resize # 672 * 1008
    #       ensure_multiple_of: 1
    #       width: 1008
    #       height: 672
    #       resize_target: True
    #     - _target_: lib.dataset.depth_estimation.transform.PrepareForNet
    #     - _target_: lib.dataset.depth_estimation.transform.SimuCarLidarApollo
    #       tar_lines: 56
    #       reserve_ratio: 0.6
    #       min_pitch: -0.07
    #     - _target_: lib.dataset.depth_estimation.transform.CompLowRes
val_dataset:
  dataset_opts:
    _target_: lib.dataset.depth_estimation.shift.Dataset
    data_root: /iag_ad_01/ad/yuanweizhong/datasets/shift/0a03-8855
    split_path: ${oc.env:workspace}/processed_datasets/shift/val_split.json
    split: 'val'
    frames: [0, -1, 50]
    transforms:
      - _target_: lib.dataset.depth_estimation.transform.PrepareForNet
      - _target_: lib.dataset.depth_estimation.transform.Crop
        size: [190, 325, 610, 955]
        down_scale: 1
      - _target_: lib.dataset.depth_estimation.transform.SimuCarLidar
        tar_lines: 64
        reserve_ratio: 0.5
        min_pitch: -0.075
      - _target_: lib.dataset.depth_estimation.transform.CompLowRes
train_loader_opts:
  batch_size: 16